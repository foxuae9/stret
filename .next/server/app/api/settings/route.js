"use strict";(()=>{var e={};e.id=668,e.ids=[668],e.modules={1185:e=>{e.exports=require("mongoose")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7688:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>O,originalPathname:()=>R,patchFetch:()=>y,requestAsyncStorage:()=>f,routeModule:()=>h,serverHooks:()=>w,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>x});var r={};n.r(r),n.d(r,{GET:()=>g,PUT:()=>m});var o=n(5419),s=n(9108),a=n(9678),i=n(8984),u=n(1494),p=n(1185),c=n.n(p);let l=new(c()).Schema({registrationOpen:{type:Boolean,default:!0}}),d=c().models.Settings||c().model("Settings",l);async function g(){try{await (0,u.Z)();let e=await d.findOne({});return e||(e=await d.create({registrationOpen:!0})),i.NextResponse.json(e)}catch(e){return i.NextResponse.json({error:"حدث خطأ في جلب الإعدادات"},{status:500})}}async function m(e){try{await (0,u.Z)();let{registrationOpen:t}=await e.json(),n=await d.findOne({});return n||(n=new d),n.registrationOpen=t,await n.save(),i.NextResponse.json(n)}catch(e){return i.NextResponse.json({error:"حدث خطأ في تحديث الإعدادات"},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/settings/route",pathname:"/api/settings",filename:"route",bundlePath:"app/api/settings/route"},resolvedPagePath:"F:\\w\\live\\fighter\\src\\app\\api\\settings\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:f,staticGenerationAsyncStorage:v,serverHooks:w,headerHooks:O,staticGenerationBailout:x}=h,R="/api/settings/route";function y(){return(0,a.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:v})}},1494:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(1185),o=n.n(r);if(!process.env.MONGODB_URI)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let s=global.mongoose;s||(s=global.mongoose={conn:null,promise:null});let a=async function(){if(s.conn)return s.conn;s.promise||(s.promise=o().connect(process.env.MONGODB_URI,{bufferCommands:!1}));try{return s.conn=await s.promise,s.conn}catch(e){throw s.promise=null,e}}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[638,791],()=>n(7688));module.exports=r})();